<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Kube-OVN Team"><link href=https://kubeovn.github.io/docs/v1.14.x/en/vpc/vpc/ rel=canonical><link href=../../kubevirt/dhcp/ rel=prev><link href=../vpc-egress-gateway/ rel=next><link rel=icon href=../../../static/kube-ovn-icon-color.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><meta name=google-site-verification content=crXUpgbTSGNmzUyHUZey8X7EXueInswioZvm9VzdJHk><title>VPC Introduction - Kube-OVN Document</title><link rel=stylesheet href=../../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-X2R3RHC957"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-X2R3RHC957",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-X2R3RHC957",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><meta property=og:type content=website><meta property=og:title content="VPC Introduction - Kube-OVN Document"><meta property=og:description content=None><meta property=og:image content=https://kubeovn.github.io/docs/v1.14.x/assets/images/social/vpc/vpc.en.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://kubeovn.github.io/docs/v1.14.x/en/vpc/vpc/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="VPC Introduction - Kube-OVN Document"><meta name=twitter:description content=None><meta name=twitter:image content=https://kubeovn.github.io/docs/v1.14.x/assets/images/social/vpc/vpc.en.png></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#config-vpc class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the stable version. <a href=../../../..> <strong>Click here to go to stable.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../ title="Kube-OVN Document" class="md-header__button md-logo" aria-label="Kube-OVN Document" data-md-component=logo> <img src=../../../static/kube-ovn-icon-color.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Kube-OVN Document </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> VPC Introduction </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button class="md-header__button md-icon" aria-label="Select language"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a href=./ hreflang=en class=md-select__link> English </a> </li> <li class=md-select__item> <a href=../../../vpc/vpc/ hreflang=zh class=md-select__link> 简体中文 </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/kubeovn/kube-ovn/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> kubeovn/kube-ovn </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../ class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../../start/prepare/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../guide/subnet/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../kubevirt/static-ip/ class=md-tabs__link> KubeVirt </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> VPC Network </a> </li> <li class=md-tabs__item> <a href=../../ops/kubectl-ko/ class=md-tabs__link> Operations </a> </li> <li class=md-tabs__item> <a href=../../advance/multi-nic/ class=md-tabs__link> Advanced Features </a> </li> <li class=md-tabs__item> <a href=../../reference/architecture/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../contact/ class=md-tabs__link> Contact Us </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../ title="Kube-OVN Document" class="md-nav__button md-logo" aria-label="Kube-OVN Document" data-md-component=logo> <img src=../../../static/kube-ovn-icon-color.svg alt=logo> </a> Kube-OVN Document </label> <div class=md-nav__source> <a href=https://github.com/kubeovn/kube-ovn/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> kubeovn/kube-ovn </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../start/prepare/ class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=../../start/one-step-install/ class=md-nav__link> <span class=md-ellipsis> One-Click Installation </span> </a> </li> <li class=md-nav__item> <a href=../../start/underlay/ class=md-nav__link> <span class=md-ellipsis> Underlay Installation </span> </a> </li> <li class=md-nav__item> <a href=../../start/talos-install/ class=md-nav__link> <span class=md-ellipsis> Install on Talos </span> </a> </li> <li class=md-nav__item> <a href=../../start/production/ class=md-nav__link> <span class=md-ellipsis> Production Ready? </span> </a> </li> <li class=md-nav__item> <a href=../../start/uninstall/ class=md-nav__link> <span class=md-ellipsis> Uninstall </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guide/subnet/ class=md-nav__link> <span class=md-ellipsis> Config Subnet </span> </a> </li> <li class=md-nav__item> <a href=../../guide/static-ip-mac/ class=md-nav__link> <span class=md-ellipsis> Fixed Addresses </span> </a> </li> <li class=md-nav__item> <a href=../../guide/ippool/ class=md-nav__link> <span class=md-ellipsis> Configure IPPool </span> </a> </li> <li class=md-nav__item> <a href=../../guide/custom-routes/ class=md-nav__link> <span class=md-ellipsis> Custom Routes </span> </a> </li> <li class=md-nav__item> <a href=../../guide/eip-snat/ class=md-nav__link> <span class=md-ellipsis> EIP and SNAT </span> </a> </li> <li class=md-nav__item> <a href=../../guide/qos/ class=md-nav__link> <span class=md-ellipsis> Manage QoS </span> </a> </li> <li class=md-nav__item> <a href=../../guide/dual-stack/ class=md-nav__link> <span class=md-ellipsis> DualStack </span> </a> </li> <li class=md-nav__item> <a href=../../guide/webhook/ class=md-nav__link> <span class=md-ellipsis> Webhook </span> </a> </li> <li class=md-nav__item> <a href=../../guide/mirror/ class=md-nav__link> <span class=md-ellipsis> Traffic Mirror </span> </a> </li> <li class=md-nav__item> <a href=../../guide/networkpolicy-log/ class=md-nav__link> <span class=md-ellipsis> NetworkPolicy Logging </span> </a> </li> <li class=md-nav__item> <a href=../../guide/loadbalancer-service/ class=md-nav__link> <span class=md-ellipsis> LoadBalancer Type Service </span> </a> </li> <li class=md-nav__item> <a href=../../guide/prometheus-grafana/ class=md-nav__link> <span class=md-ellipsis> Monitor and Dashboard </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> KubeVirt </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> KubeVirt </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../kubevirt/static-ip/ class=md-nav__link> <span class=md-ellipsis> Fixed Virtual Machine Addresses </span> </a> </li> <li class=md-nav__item> <a href=../../kubevirt/vm-clone/ class=md-nav__link> <span class=md-ellipsis> Virtual Machine Clone </span> </a> </li> <li class=md-nav__item> <a href=../../kubevirt/dual-stack/ class=md-nav__link> <span class=md-ellipsis> DualStack Network </span> </a> </li> <li class=md-nav__item> <a href=../../kubevirt/live-migration/ class=md-nav__link> <span class=md-ellipsis> Live Migration </span> </a> </li> <li class=md-nav__item> <a href=../../kubevirt/dhcp/ class=md-nav__link> <span class=md-ellipsis> DHCP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> VPC Network </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> VPC Network </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> VPC Introduction </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> VPC Introduction </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#implementation-principle class=md-nav__link> <span class=md-ellipsis> Implementation Principle </span> </a> </li> <li class=md-nav__item> <a href=#creating-custom-vpcs class=md-nav__link> <span class=md-ellipsis> Creating Custom VPCs </span> </a> <nav class=md-nav aria-label="Creating Custom VPCs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#custom-vpc-pod-supports-livenessprobe-and-readinessprobe class=md-nav__link> <span class=md-ellipsis> Custom VPC Pod supports livenessProbe and readinessProbe </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-vpc-nat-gateway class=md-nav__link> <span class=md-ellipsis> Create VPC NAT Gateway </span> </a> <nav class=md-nav aria-label="Create VPC NAT Gateway"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-the-external-network class=md-nav__link> <span class=md-ellipsis> Configuring the External Network </span> </a> </li> <li class=md-nav__item> <a href=#enabling-the-vpc-gateway class=md-nav__link> <span class=md-ellipsis> Enabling the VPC Gateway </span> </a> </li> <li class=md-nav__item> <a href=#create-vpc-gateway class=md-nav__link> <span class=md-ellipsis> Create VPC Gateway </span> </a> </li> <li class=md-nav__item> <a href=#create-eip class=md-nav__link> <span class=md-ellipsis> Create EIP </span> </a> </li> <li class=md-nav__item> <a href=#create-dnat-rules class=md-nav__link> <span class=md-ellipsis> Create DNAT Rules </span> </a> </li> <li class=md-nav__item> <a href=#create-snat-rules class=md-nav__link> <span class=md-ellipsis> Create SNAT Rules </span> </a> </li> <li class=md-nav__item> <a href=#create-floating-ip class=md-nav__link> <span class=md-ellipsis> Create Floating IP </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-routing class=md-nav__link> <span class=md-ellipsis> Custom Routing </span> </a> <nav class=md-nav aria-label="Custom Routing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#static-routes class=md-nav__link> <span class=md-ellipsis> Static Routes </span> </a> </li> <li class=md-nav__item> <a href=#policy-routes class=md-nav__link> <span class=md-ellipsis> Policy Routes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-vpc-dns class=md-nav__link> <span class=md-ellipsis> Custom vpc-dns </span> </a> <nav class=md-nav aria-label="Custom vpc-dns"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-an-additional-network class=md-nav__link> <span class=md-ellipsis> Create an Additional Network </span> </a> </li> <li class=md-nav__item> <a href=#modify-the-provider-of-the-ovn-default-logical-switch class=md-nav__link> <span class=md-ellipsis> Modify the Provider of the ovn-default Logical Switch </span> </a> </li> <li class=md-nav__item> <a href=#modify-the-vpc-dns-configmap class=md-nav__link> <span class=md-ellipsis> Modify the vpc-dns ConfigMap </span> </a> </li> <li class=md-nav__item> <a href=#deploying-vpc-dns-dependent-resources class=md-nav__link> <span class=md-ellipsis> Deploying VPC-DNS Dependent Resources </span> </a> </li> <li class=md-nav__item> <a href=#deploy-vpc-dns class=md-nav__link> <span class=md-ellipsis> Deploy vpc-dns </span> </a> </li> <li class=md-nav__item> <a href=#restrictions class=md-nav__link> <span class=md-ellipsis> Restrictions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#default-subnet-selection-for-custom-vpc class=md-nav__link> <span class=md-ellipsis> Default subnet selection for custom VPC </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../vpc-egress-gateway/ class=md-nav__link> <span class=md-ellipsis> Egress Gateway </span> </a> </li> <li class=md-nav__item> <a href=../vpc-qos/ class=md-nav__link> <span class=md-ellipsis> Egress QoS Configuration </span> </a> </li> <li class=md-nav__item> <a href=../vpc-internal-lb/ class=md-nav__link> <span class=md-ellipsis> Internal Load Balancer </span> </a> </li> <li class=md-nav__item> <a href=../vpc-internal-dns/ class=md-nav__link> <span class=md-ellipsis> Internal DNS </span> </a> </li> <li class=md-nav__item> <a href=../security-group/ class=md-nav__link> <span class=md-ellipsis> Security Group </span> </a> </li> <li class=md-nav__item> <a href=../ovn-eip-fip-snat/ class=md-nav__link> <span class=md-ellipsis> Support OVN EIP,FIP and SNAT </span> </a> </li> <li class=md-nav__item> <a href=../ovn-l3-ha-based-ecmp-with-bfd/ class=md-nav__link> <span class=md-ellipsis> Support OVN SNAT L3 HA Based ECMP and BFD Static Route </span> </a> </li> <li class=md-nav__item> <a href=../vpc-peering/ class=md-nav__link> <span class=md-ellipsis> VPC Peering </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Operations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Operations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ops/kubectl-ko/ class=md-nav__link> <span class=md-ellipsis> Kubectl Plugin </span> </a> </li> <li class=md-nav__item> <a href=../../ops/delete-worker-node/ class=md-nav__link> <span class=md-ellipsis> Deleting Work Node </span> </a> </li> <li class=md-nav__item> <a href=../../ops/change-ovn-central-node/ class=md-nav__link> <span class=md-ellipsis> Replace ovn-central Node </span> </a> </li> <li class=md-nav__item> <a href=../../ops/recover-db/ class=md-nav__link> <span class=md-ellipsis> OVN DB Backup and Recovery </span> </a> </li> <li class=md-nav__item> <a href=../../ops/change-default-subnet/ class=md-nav__link> <span class=md-ellipsis> Change Subnet CIDR </span> </a> </li> <li class=md-nav__item> <a href=../../ops/change-join-subnet/ class=md-nav__link> <span class=md-ellipsis> Change Join Subnet CIDR </span> </a> </li> <li class=md-nav__item> <a href=../../ops/change-log-level/ class=md-nav__link> <span class=md-ellipsis> Change Log Level </span> </a> </li> <li class=md-nav__item> <a href=../../ops/faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Advanced Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Advanced Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../advance/multi-nic/ class=md-nav__link> <span class=md-ellipsis> Manage Multiple Interface </span> </a> </li> <li class=md-nav__item> <a href=../../advance/performance-tuning/ class=md-nav__link> <span class=md-ellipsis> Performance Tuning </span> </a> </li> <li class=md-nav__item> <a href=../../advance/fastpath/ class=md-nav__link> <span class=md-ellipsis> Compile FastPath Module </span> </a> </li> <li class=md-nav__item> <a href=../../advance/accelerate-intra-node-tcp-with-ebpf/ class=md-nav__link> <span class=md-ellipsis> Accelerate TCP Communication in Node with eBPF </span> </a> </li> <li class=md-nav__item> <a href=../../advance/with-ovn-ic/ class=md-nav__link> <span class=md-ellipsis> Cluster Inter-Connection with OVN-IC </span> </a> </li> <li class=md-nav__item> <a href=../../advance/with-submariner/ class=md-nav__link> <span class=md-ellipsis> Cluster Inter-Connection with Submariner </span> </a> </li> <li class=md-nav__item> <a href=../../advance/overlay-with-route/ class=md-nav__link> <span class=md-ellipsis> Interconnection with Routes in Overlay Mode </span> </a> </li> <li class=md-nav__item> <a href=../../advance/with-bgp/ class=md-nav__link> <span class=md-ellipsis> BGP Support </span> </a> </li> <li class=md-nav__item> <a href=../../advance/with-metallb/ class=md-nav__link> <span class=md-ellipsis> Integrating MetalLB with Kube-OVN Underlay </span> </a> </li> <li class=md-nav__item> <a href=../../advance/with-cilium/ class=md-nav__link> <span class=md-ellipsis> Integration with Cilium </span> </a> </li> <li class=md-nav__item> <a href=../../advance/cilium-networkpolicy/ class=md-nav__link> <span class=md-ellipsis> Cilium NetworkPolicy Support </span> </a> </li> <li class=md-nav__item> <a href=../../advance/cilium-hubble-observe/ class=md-nav__link> <span class=md-ellipsis> Cilium Network Traffic Observation </span> </a> </li> <li class=md-nav__item> <a href=../../advance/external-gateway/ class=md-nav__link> <span class=md-ellipsis> External Gateway </span> </a> </li> <li class=md-nav__item> <a href=../../advance/vip/ class=md-nav__link> <span class=md-ellipsis> VIP Reservation </span> </a> </li> <li class=md-nav__item> <a href=../../advance/offload-mellanox/ class=md-nav__link> <span class=md-ellipsis> Offload with Mellanox </span> </a> </li> <li class=md-nav__item> <a href=../../advance/offload-corigine/ class=md-nav__link> <span class=md-ellipsis> Offload with Corigine </span> </a> </li> <li class=md-nav__item> <a href=../../advance/offload-yunsilicon/ class=md-nav__link> <span class=md-ellipsis> Offload with Yunsilicon </span> </a> </li> <li class=md-nav__item> <a href=../../advance/offload-yusur/ class=md-nav__link> <span class=md-ellipsis> Offload with YUSUR </span> </a> </li> <li class=md-nav__item> <a href=../../advance/dpdk/ class=md-nav__link> <span class=md-ellipsis> DPDK Support </span> </a> </li> <li class=md-nav__item> <a href=../../advance/with-openstack/ class=md-nav__link> <span class=md-ellipsis> Integration with OpenStack </span> </a> </li> <li class=md-nav__item> <a href=../../advance/ovn-ipsec/ class=md-nav__link> <span class=md-ellipsis> OVN IPsec Support </span> </a> </li> <li class=md-nav__item> <a href=../../advance/ovn-remote-port-mirroring/ class=md-nav__link> <span class=md-ellipsis> OVN Remote Port Mirroring </span> </a> </li> <li class=md-nav__item> <a href=../../advance/node-local-dns/ class=md-nav__link> <span class=md-ellipsis> Node Local DNS Cache and Kube-OVN Adaptation </span> </a> </li> <li class=md-nav__item> <a href=../../advance/nat-policy-rule/ class=md-nav__link> <span class=md-ellipsis> Default VPC NAT Policy Rule </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../reference/next/ class=md-nav__link> <span class=md-ellipsis> What's Next </span> </a> </li> <li class=md-nav__item> <a href=../../reference/setup-options/ class=md-nav__link> <span class=md-ellipsis> Installation and Configuration Options </span> </a> </li> <li class=md-nav__item> <a href=../../reference/releasing/ class=md-nav__link> <span class=md-ellipsis> Release Management </span> </a> </li> <li class=md-nav__item> <a href=../../reference/feature-stage/ class=md-nav__link> <span class=md-ellipsis> Feature Stage </span> </a> </li> <li class=md-nav__item> <a href=../../reference/underlay-topology/ class=md-nav__link> <span class=md-ellipsis> Underlay Traffic Topology </span> </a> </li> <li class=md-nav__item> <a href=../../reference/iptables-rules/ class=md-nav__link> <span class=md-ellipsis> Iptables Rules </span> </a> </li> <li class=md-nav__item> <a href=../../reference/dev-env/ class=md-nav__link> <span class=md-ellipsis> Development and Contribution Guide </span> </a> </li> <li class=md-nav__item> <a href=../../reference/ovs-ovn-customized/ class=md-nav__link> <span class=md-ellipsis> OVS/OVN Customization </span> </a> </li> <li class=md-nav__item> <a href=../../reference/tunnel-protocol/ class=md-nav__link> <span class=md-ellipsis> Tunnel Protocol Selection </span> </a> </li> <li class=md-nav__item> <a href=../../reference/metrics/ class=md-nav__link> <span class=md-ellipsis> Metrics </span> </a> </li> <li class=md-nav__item> <a href=../../reference/kube-ovn-api/ class=md-nav__link> <span class=md-ellipsis> Kube-OVN API Reference </span> </a> </li> <li class=md-nav__item> <a href=../../reference/annotations/ class=md-nav__link> <span class=md-ellipsis> Annotation Usage </span> </a> </li> <li class=md-nav__item> <a href=../../reference/document-convention/ class=md-nav__link> <span class=md-ellipsis> Document Convention </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../contact/ class=md-nav__link> <span class=md-ellipsis> Contact Us </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#implementation-principle class=md-nav__link> <span class=md-ellipsis> Implementation Principle </span> </a> </li> <li class=md-nav__item> <a href=#creating-custom-vpcs class=md-nav__link> <span class=md-ellipsis> Creating Custom VPCs </span> </a> <nav class=md-nav aria-label="Creating Custom VPCs"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#custom-vpc-pod-supports-livenessprobe-and-readinessprobe class=md-nav__link> <span class=md-ellipsis> Custom VPC Pod supports livenessProbe and readinessProbe </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-vpc-nat-gateway class=md-nav__link> <span class=md-ellipsis> Create VPC NAT Gateway </span> </a> <nav class=md-nav aria-label="Create VPC NAT Gateway"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-the-external-network class=md-nav__link> <span class=md-ellipsis> Configuring the External Network </span> </a> </li> <li class=md-nav__item> <a href=#enabling-the-vpc-gateway class=md-nav__link> <span class=md-ellipsis> Enabling the VPC Gateway </span> </a> </li> <li class=md-nav__item> <a href=#create-vpc-gateway class=md-nav__link> <span class=md-ellipsis> Create VPC Gateway </span> </a> </li> <li class=md-nav__item> <a href=#create-eip class=md-nav__link> <span class=md-ellipsis> Create EIP </span> </a> </li> <li class=md-nav__item> <a href=#create-dnat-rules class=md-nav__link> <span class=md-ellipsis> Create DNAT Rules </span> </a> </li> <li class=md-nav__item> <a href=#create-snat-rules class=md-nav__link> <span class=md-ellipsis> Create SNAT Rules </span> </a> </li> <li class=md-nav__item> <a href=#create-floating-ip class=md-nav__link> <span class=md-ellipsis> Create Floating IP </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-routing class=md-nav__link> <span class=md-ellipsis> Custom Routing </span> </a> <nav class=md-nav aria-label="Custom Routing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#static-routes class=md-nav__link> <span class=md-ellipsis> Static Routes </span> </a> </li> <li class=md-nav__item> <a href=#policy-routes class=md-nav__link> <span class=md-ellipsis> Policy Routes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-vpc-dns class=md-nav__link> <span class=md-ellipsis> Custom vpc-dns </span> </a> <nav class=md-nav aria-label="Custom vpc-dns"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-an-additional-network class=md-nav__link> <span class=md-ellipsis> Create an Additional Network </span> </a> </li> <li class=md-nav__item> <a href=#modify-the-provider-of-the-ovn-default-logical-switch class=md-nav__link> <span class=md-ellipsis> Modify the Provider of the ovn-default Logical Switch </span> </a> </li> <li class=md-nav__item> <a href=#modify-the-vpc-dns-configmap class=md-nav__link> <span class=md-ellipsis> Modify the vpc-dns ConfigMap </span> </a> </li> <li class=md-nav__item> <a href=#deploying-vpc-dns-dependent-resources class=md-nav__link> <span class=md-ellipsis> Deploying VPC-DNS Dependent Resources </span> </a> </li> <li class=md-nav__item> <a href=#deploy-vpc-dns class=md-nav__link> <span class=md-ellipsis> Deploy vpc-dns </span> </a> </li> <li class=md-nav__item> <a href=#restrictions class=md-nav__link> <span class=md-ellipsis> Restrictions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#default-subnet-selection-for-custom-vpc class=md-nav__link> <span class=md-ellipsis> Default subnet selection for custom VPC </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?39cf121f7a1f65bb4e4fe7c0a82c6014";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script> <a href=https://github.com/kubeovn/docs/edit/master/docs/vpc/vpc.en.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/kubeovn/docs/raw/master/docs/vpc/vpc.en.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=config-vpc>Config VPC<a class=headerlink href=#config-vpc title="Permanent link">&para;</a></h1> <p>Kube-OVN supports multi-tenant isolation level VPC networks. Different VPC networks are independent of each other and can be configured separately with Subnet CIDRs, routing policies, security policies, outbound gateways, EIP, etc.</p> <blockquote> <p>VPC is mainly used in scenarios where strong isolation is required for multi-tenant networks and some Kubernetes networking features conflict under multi-tenant networks. For example, node and pod access, NodePort functionality, network access-based health checks, and DNS capabilities are not supported in multi-tenant network scenarios at this time. In order to facilitate common Kubernetes usage scenarios, Kube-OVN has a special design for the default VPC where the Subnet under the VPC can meet the Kubernetes specification. The custom VPC supports static routing, EIP and NAT gateways as described in this document. Common isolation requirements can be achieved through network policies and Subnet ACLs under the default VPC, so before using a custom VPC, please make sure whether you need VPC-level isolation and understand the limitations under the custom VPC. For Underlay subnets, physical switches are responsible for data-plane forwarding, so VPCs cannot isolate Underlay subnets.</p> </blockquote> <p><img alt src=../../../static/network-topology.png></p> <h2 id=implementation-principle>Implementation Principle<a class=headerlink href=#implementation-principle title="Permanent link">&para;</a></h2> <p>In Kube-OVN, each VPC is mapped to a <a href=https://man7.org/linux/man-pages/man5/ovn-nb.5.html#Logical_Router_TABLE target=_blank>Logical Router</a> in OVN. Multiple logical routers are independent network units, and each logical router can be associated with its own <a href=https://man7.org/linux/man-pages/man5/ovn-nb.5.html#Logical_Switch_TABLE target=_blank>Logical Switches</a>, thereby having independent network ports and IP address spaces. Traffic from different VPCs is distinguished and isolated by different Datapath IDs when traversing tunnels, and forwarding is performed based on Datapath IDs. This ensures IP address space isolation, allowing the same IP addresses to be used in different VPCs without conflicts. For tunnel encapsulation formats, refer to <a href=https://man7.org/linux/man-pages/man7/ovn-architecture.7.html#DESIGN_DECISIONS target=_blank>OVN Architecture Design Decisions</a>. </p> <h2 id=creating-custom-vpcs>Creating Custom VPCs<a class=headerlink href=#creating-custom-vpcs title="Permanent link">&para;</a></h2> <p>Create two VPCs:</p> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Vpc</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-vpc-1</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>namespaces</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ns1</span>
<span class=nn>---</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Vpc</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-vpc-2</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>namespaces</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ns2</span>
</code></pre></div> <ul> <li><code>namespaces</code>: Limit which namespaces can use this VPC. If empty, all namespaces can use this VPC.</li> </ul> <p>Create two Subnets, belonging to two different VPCs and having the same CIDR:</p> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Subnet</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">net1</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>vpc</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-vpc-1</span>
<span class=w>  </span><span class=nt>cidrBlock</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.1.0/24</span>
<span class=w>  </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IPv4</span>
<span class=w>  </span><span class=nt>namespaces</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ns1</span>
<span class=nn>---</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Subnet</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">net2</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>vpc</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-vpc-2</span>
<span class=w>  </span><span class=nt>cidrBlock</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.1.0/24</span>
<span class=w>  </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IPv4</span>
<span class=w>  </span><span class=nt>namespaces</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ns2</span>
</code></pre></div> <p>Create Pods under two separate Namespaces:</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ns1</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vpc1-pod</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>containers</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vpc1-pod</span>
<span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">docker.io/library/nginx:alpine</span>
<span class=nn>---</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ns2</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vpc2-pod</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>containers</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vpc2-pod</span>
<span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">docker.io/library/nginx:alpine</span>
</code></pre></div> <p>After running successfully, you can observe that the two Pod addresses belong to the same CIDR, but the two Pods cannot access each other because they are running on different tenant VPCs.</p> <h3 id=custom-vpc-pod-supports-livenessprobe-and-readinessprobe>Custom VPC Pod supports livenessProbe and readinessProbe<a class=headerlink href=#custom-vpc-pod-supports-livenessprobe-and-readinessprobe title="Permanent link">&para;</a></h3> <p>Since the Pods under the custom VPC do not communicate with the network of the node, the probe packets sent by the kubelet cannot reach the Pods in the custom VPC. Kube-OVN uses TProxy to redirect the detection packets sent by kubelet to Pods in the custom VPC to achieve this function.</p> <p>The configuration method is as follows, add the parameter <code>--enable-tproxy=true</code> in DaemonSet <code>kube-ovn-cni</code>:</p> <div class=highlight><pre><span></span><code><span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>template</span><span class=p>:</span>
<span class=w>    </span><span class=nt>spec</span><span class=p>:</span>
<span class=w>      </span><span class=nt>containers</span><span class=p>:</span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>args</span><span class=p>:</span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">--enable-tproxy=true</span>
</code></pre></div> <p>Restrictions for this feature:</p> <ol> <li>When Pods under different VPCs have the same IP under the same node, the detection function fails.</li> <li>Currently, only <code>tcpSocket</code> and <code>httpGet</code> are supported.</li> </ol> <h2 id=create-vpc-nat-gateway>Create VPC NAT Gateway<a class=headerlink href=#create-vpc-nat-gateway title="Permanent link">&para;</a></h2> <blockquote> <p>Subnets under custom VPCs do not support distributed gateways and centralized gateways under default VPCs.</p> </blockquote> <p>Pod access to the external network within the VPC requires a VPC gateway, which bridges the physical and tenant networks and provides floating IP, SNAT and DNAT capabilities.</p> <p>The VPC gateway function relies on Multus-CNI function, please refer to <a href=https://github.com/k8snetworkplumbingwg/multus-cni/blob/master/docs/quickstart.md target=target>multus-cni</a>.</p> <h3 id=configuring-the-external-network>Configuring the External Network<a class=headerlink href=#configuring-the-external-network title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Subnet</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-vpc-external-network</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IPv4</span>
<span class=w>  </span><span class=nt>provider</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-vpc-external-network.kube-system</span>
<span class=w>  </span><span class=nt>cidrBlock</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.0.0/24</span>
<span class=w>  </span><span class=nt>gateway</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.0.1</span><span class=w>  </span><span class=c1># IP address of the physical gateway</span>
<span class=w>  </span><span class=nt>excludeIps</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.0.1..192.168.0.10</span>
<span class=nn>---</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&quot;k8s.cni.cncf.io/v1&quot;</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NetworkAttachmentDefinition</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-vpc-external-network</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{</span>
<span class=w>      </span><span class=s>&quot;cniVersion&quot;:</span><span class=nv> </span><span class=s>&quot;0.3.0&quot;,</span>
<span class=w>      </span><span class=s>&quot;type&quot;:</span><span class=nv> </span><span class=s>&quot;macvlan&quot;,</span>
<span class=w>      </span><span class=s>&quot;master&quot;:</span><span class=nv> </span><span class=s>&quot;eth1&quot;,</span>
<span class=w>      </span><span class=s>&quot;mode&quot;:</span><span class=nv> </span><span class=s>&quot;bridge&quot;,</span>
<span class=w>      </span><span class=s>&quot;ipam&quot;:</span><span class=nv> </span><span class=s>{</span>
<span class=w>        </span><span class=s>&quot;type&quot;:</span><span class=nv> </span><span class=s>&quot;kube-ovn&quot;,</span>
<span class=w>        </span><span class=s>&quot;server_socket&quot;:</span><span class=nv> </span><span class=s>&quot;/run/openvswitch/kube-ovn-daemon.sock&quot;,</span>
<span class=w>        </span><span class=s>&quot;provider&quot;:</span><span class=nv> </span><span class=s>&quot;ovn-vpc-external-network.kube-system&quot;</span>
<span class=w>      </span><span class=s>}</span>
<span class=w>    </span><span class=s>}&#39;</span>
</code></pre></div> <ul> <li>This Subnet is used to manage the available external addresses and the address will be allocated to VPC NAT Gateway through Macvlan, so please communicate with your network administrator to give you the available physical segment IPs.</li> <li>The VPC gateway uses Macvlan for physical network configuration, and <code>master</code> of <code>NetworkAttachmentDefinition</code> should be the NIC name of the corresponding physical network NIC.</li> <li><code>name</code>: External network name.</li> </ul> <p>For macvlan mode, the nic will send packets directly through that node NIC, relying on the underlying network devices for L2/L3 level forwarding capabilities. You need to configure the corresponding gateway, Vlan and security policy in the underlying network device in advance.</p> <ol> <li>For OpenStack VM environments, you need to turn off <code>PortSecurity</code> on the corresponding network port.</li> <li>For VMware vSwitch networks, <code>MAC Address Changes</code>, <code>Forged Transmits</code> and <code>Promiscuous Mode Operation</code> should be set to <code>allow</code>.</li> <li>For Hyper-V virtualization, <code>MAC Address Spoofing</code> should be enabled in VM nic advanced features.</li> <li>Public clouds, such as AWS, GCE, AliCloud, etc., do not support user-defined Mac, so they cannot support Macvlan mode network.</li> <li>Due to the limitations of Macvlan itself, a Macvlan sub-interface cannot access the address of the parent interface, which means that it is not possible to access the Pod through the network on the host machine where the VpcNATGateway Pod is located.</li> <li>If the physical network card corresponds to a switch interface in Trunk mode, a sub-interface needs to be created on the network card and provided to Macvlan for use.</li> </ol> <h3 id=enabling-the-vpc-gateway>Enabling the VPC Gateway<a class=headerlink href=#enabling-the-vpc-gateway title="Permanent link">&para;</a></h3> <p>The VPC gateway functionality can be enabled by configuring the <code>ovn-vpc-nat-gw-config</code> in the <code>kube-system</code> namespace. The <code>nodeSelector</code> can be used to specify the node where the gateway is deployed:</p> <div class=highlight><pre><span></span><code><span class=nn>---</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-vpc-nat-config</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">docker.io/kubeovn/vpc-nat-gateway:v1.14.10</span>
<span class=w>  </span><span class=nt>nodeSelector</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<span class=w>    </span><span class=no>kubernetes.io/hostname: kube-ovn-control-plane</span>
<span class=nn>---</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-vpc-nat-gw-config</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>enable-vpc-nat-gw</span><span class=p>:</span><span class=w> </span><span class=s>&#39;true&#39;</span>
</code></pre></div> <ul> <li><code>image</code>: The image used by the Gateway Pod.</li> <li><code>enable-vpc-nat-gw</code>: Controls whether the VPC Gateway feature is enabled.</li> </ul> <h3 id=create-vpc-gateway>Create VPC Gateway<a class=headerlink href=#create-vpc-gateway title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">VpcNatGateway</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gw1</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>vpc</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-vpc-1</span>
<span class=w>  </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">net1</span>
<span class=w>  </span><span class=nt>lanIp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.1.254</span>
<span class=w>  </span><span class=nt>selector</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;kubernetes.io/hostname:</span><span class=nv> </span><span class=s>kube-ovn-worker&quot;</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;kubernetes.io/os:</span><span class=nv> </span><span class=s>linux&quot;</span>
<span class=w>  </span><span class=nt>externalSubnets</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-vpc-external-network</span>
</code></pre></div> <ul> <li><code>vpc</code>: The VPC to which this VpcNatGateway belongs.</li> <li><code>subnet</code>: A Subnet within the VPC, the VPC Gateway Pod will use <code>lanIp</code> to connect to the tenant network under that subnet.</li> <li><code>lanIp</code>: An unused IP within the <code>subnet</code> that the VPC Gateway Pod will eventually use. When configuring routing for a VPC, the <code>nextHopIP</code> needs to be set to the <code>lanIp</code> of the current VpcNatGateway.</li> <li><code>selector</code>: The node selector for VpcNatGateway Pod has the same format as NodeSelector in Kubernetes.</li> <li><code>externalSubnets</code>: External network used by the VPC gateway, if not configured, <code>ovn-vpc-external-network</code> is used by default, and only one external network is supported in the current version.</li> </ul> <p>Other configurable parameters:</p> <ul> <li><code>tolerations</code>: Configure tolerance for the VPC gateway. For details, see <a href=https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/#taint-nodes-by-condition>Taints and Tolerations</a></li> <li><code>affinity</code>: Configure affinity for the Pod or node of the VPC gateway. For details, see <a href=https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity>Assigning Pods to Nodes</a></li> </ul> <p>Things to note when using VPC-NAT-GW:</p> <ol> <li>After the nat gw pod is created, the nic net1 arp is disabled and the physical gateway cannot be pinged. After creating the eip, the arp will be automatically enabled and the ping to underlay gateway should be ok.</li> </ol> <h3 id=create-eip>Create EIP<a class=headerlink href=#create-eip title="Permanent link">&para;</a></h3> <p>EIP allows for floating IP, SNAT, and DNAT operations after assigning an IP from an external network segment to a VPC gateway.</p> <p>Randomly assign an address to the EIP:</p> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IptablesEIP</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eip-random</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>natGwDp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gw1</span>
</code></pre></div> <p>Fixed EIP address assignment:</p> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IptablesEIP</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eip-static</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>natGwDp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gw1</span>
<span class=w>  </span><span class=nt>v4ip</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.0.100</span>
</code></pre></div> <p>Specify the external network on which the EIP is located:</p> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IptablesEIP</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eip-random</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>natGwDp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gw1</span>
<span class=w>  </span><span class=nt>externalSubnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-vpc-external-network</span>
</code></pre></div> <ul> <li><code>externalSubnet</code>: The name of the external network on which the EIP is located. If not specified, it defaults to <code>ovn-vpc-external-network</code>. If specified, it must be one of the <code>externalSubnets</code> of the VPC gateway.</li> </ul> <h3 id=create-dnat-rules>Create DNAT Rules<a class=headerlink href=#create-dnat-rules title="Permanent link">&para;</a></h3> <p>Through the DNAT rules, external can access to an IP and port within a VPC through an EIP and port.</p> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IptablesEIP</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eipd01</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>natGwDp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gw1</span>

<span class=nn>---</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IptablesDnatRule</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">dnat01</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>eip</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eipd01</span>
<span class=w>  </span><span class=nt>externalPort</span><span class=p>:</span><span class=w> </span><span class=s>&#39;8888&#39;</span>
<span class=w>  </span><span class=nt>internalIp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.1.10</span>
<span class=w>  </span><span class=nt>internalPort</span><span class=p>:</span><span class=w> </span><span class=s>&#39;80&#39;</span>
<span class=w>  </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span>
</code></pre></div> <h3 id=create-snat-rules>Create SNAT Rules<a class=headerlink href=#create-snat-rules title="Permanent link">&para;</a></h3> <p>Through SNAT rules, when a Pod in the VPC accesses an external address, it will go through the corresponding EIP for SNAT.</p> <div class=highlight><pre><span></span><code><span class=nn>---</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IptablesEIP</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eips01</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>natGwDp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gw1</span>
<span class=nn>---</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IptablesSnatRule</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">snat01</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>eip</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eips01</span>
<span class=w>  </span><span class=nt>internalCIDR</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.1.0/24</span>
</code></pre></div> <h3 id=create-floating-ip>Create Floating IP<a class=headerlink href=#create-floating-ip title="Permanent link">&para;</a></h3> <p>Through floating IP rules, one IP in the VPC will be completely mapped to the EIP, and the external can access the IP in the VPC through this EIP. When the IP in the VPC accesses the external address, it will be SNAT to this EIP</p> <div class=highlight><pre><span></span><code><span class=nn>---</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IptablesEIP</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eipf01</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>natGwDp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gw1</span>

<span class=nn>---</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IptablesFIPRule</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fip01</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>eip</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eipf01</span>
<span class=w>  </span><span class=nt>internalIp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.1.5</span>
</code></pre></div> <h2 id=custom-routing>Custom Routing<a class=headerlink href=#custom-routing title="Permanent link">&para;</a></h2> <p>Within the custom VPC, users can customize the routing rules within the VPC and combine it with the gateway for more flexible forwarding. Kube-OVN supports static routes and more flexible policy routes.</p> <h3 id=static-routes>Static Routes<a class=headerlink href=#static-routes title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Vpc</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-vpc-1</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>staticRoutes</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>cidr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span>
<span class=w>      </span><span class=nt>nextHopIP</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.1.254</span>
<span class=w>      </span><span class=nt>policy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">policyDst</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>cidr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">172.31.0.0/24</span>
<span class=w>      </span><span class=nt>nextHopIP</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.1.253</span>
<span class=w>      </span><span class=nt>policy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">policySrc</span>
<span class=w>      </span><span class=nt>routeTable</span><span class=p>:</span><span class=w> </span><span class=s>&quot;rtb1&quot;</span>
</code></pre></div> <ul> <li><code>policy</code>: Supports destination routing <code>policyDst</code> and source routing <code>policySrc</code>.</li> <li>When there are overlapping routing rules, the rule with the longer CIDR mask has higher priority, and if the mask length is the same, the destination route has a higher priority over the source route.</li> <li><code>routeTable</code>: You can store the route in specific table, default is main table. Associate with subnet please defer to <a href=../../guide/subnet/#create-custom-subnets>Create Custom Subnets</a></li> </ul> <h3 id=policy-routes>Policy Routes<a class=headerlink href=#policy-routes title="Permanent link">&para;</a></h3> <p>Traffic matched by static routes can be controlled at a finer granularity by policy routing. Policy routing provides more precise matching rules, priority control and more forwarding actions. This feature brings the OVN internal logical router policy function directly to the outside world, for more information on its use, please refer to <a href=https://man7.org/linux/man-pages/man5/ovn-nb.5.html#Logical_Router_Policy_TABLE target=target>Logical Router Policy</a>.</p> <p>An example of policy routes:</p> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Vpc</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-vpc-1</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>policyRoutes</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">drop</span>
<span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ip4.src==10.0.1.0/24 &amp;&amp; ip4.dst==10.0.1.250</span>
<span class=w>      </span><span class=nt>priority</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>action</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">reroute</span>
<span class=w>      </span><span class=nt>match</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ip4.src==10.0.1.0/24</span>
<span class=w>      </span><span class=nt>nextHopIP</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.1.252</span>
<span class=w>      </span><span class=nt>priority</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div> <h2 id=custom-vpc-dns>Custom vpc-dns<a class=headerlink href=#custom-vpc-dns title="Permanent link">&para;</a></h2> <p>Due to the isolation between custom VPCs and default VPC networks, Pods in VPCs cannot use the default coredns service for domain name resolution. If you want to use coredns to resolve Service domain names within the custom VPC, you can use the <code>vpc-dns</code> resource provided by Kube-OVN.</p> <h3 id=create-an-additional-network>Create an Additional Network<a class=headerlink href=#create-an-additional-network title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&quot;k8s.cni.cncf.io/v1&quot;</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NetworkAttachmentDefinition</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-nad</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{</span>
<span class=w>      </span><span class=s>&quot;cniVersion&quot;:</span><span class=nv> </span><span class=s>&quot;0.3.0&quot;,</span>
<span class=w>      </span><span class=s>&quot;type&quot;:</span><span class=nv> </span><span class=s>&quot;kube-ovn&quot;,</span>
<span class=w>      </span><span class=s>&quot;server_socket&quot;:</span><span class=nv> </span><span class=s>&quot;/run/openvswitch/kube-ovn-daemon.sock&quot;,</span>
<span class=w>      </span><span class=s>&quot;provider&quot;:</span><span class=nv> </span><span class=s>&quot;ovn-nad.default.ovn&quot;</span>
<span class=w>    </span><span class=s>}&#39;</span>
</code></pre></div> <h3 id=modify-the-provider-of-the-ovn-default-logical-switch>Modify the Provider of the ovn-default Logical Switch<a class=headerlink href=#modify-the-provider-of-the-ovn-default-logical-switch title="Permanent link">&para;</a></h3> <p>Modify the provider of ovn-default to the provider <code>ovn-nad.default.ovn</code> configured above in nad:</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Subnet</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-default</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>cidrBlock</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.16.0.0/16</span>
<span class=w>  </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class=w>  </span><span class=nt>disableGatewayCheck</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class=w>  </span><span class=nt>disableInterConnection</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class=w>  </span><span class=nt>enableDHCP</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class=w>  </span><span class=nt>enableIPv6RA</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class=w>  </span><span class=nt>excludeIps</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.16.0.1</span>
<span class=w>  </span><span class=nt>gateway</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.16.0.1</span>
<span class=w>  </span><span class=nt>gatewayType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">distributed</span>
<span class=w>  </span><span class=nt>logicalGateway</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class=w>  </span><span class=nt>natOutgoing</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class=w>  </span><span class=nt>private</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class=w>  </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IPv4</span>
<span class=w>  </span><span class=nt>provider</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-nad.default.ovn</span>
<span class=w>  </span><span class=nt>vpc</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-cluster</span>
</code></pre></div> <h3 id=modify-the-vpc-dns-configmap>Modify the vpc-dns ConfigMap<a class=headerlink href=#modify-the-vpc-dns-configmap title="Permanent link">&para;</a></h3> <p>Create a ConfigMap in the kube-system namespace, configure the vpc-dns parameters to be used for the subsequent vpc-dns feature activation:</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vpc-dns-config</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>coredns-vip</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.96.0.3</span>
<span class=w>  </span><span class=nt>enable-vpc-dns</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
<span class=w>  </span><span class=nt>nad-name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-nad</span>
<span class=w>  </span><span class=nt>nad-provider</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ovn-nad.default.ovn</span>
</code></pre></div> <ul> <li><code>enable-vpc-dns</code>: (optional) <code>true</code> to enable the feature, <code>false</code> to disable the feature. Default <code>true</code>.</li> <li><code>coredns-image</code>: (optional): DNS deployment image. Default is the cluster coredns deployment version.</li> <li><code>coredns-template</code>: (optional): URL of the DNS deployment template. Default: <code>yamls/coredns-template.yaml</code> in the current version repository.</li> <li><code>coredns-vip</code>: VIP providing LB service for coredns.</li> <li><code>nad-name</code>: Name of the configured <code>network-attachment-definitions</code> resource.</li> <li><code>nad-provider</code>: Name of the used provider.</li> <li><code>k8s-service-host</code>: (optional) IP used by coredns to access the k8s apiserver service.</li> <li><code>k8s-service-port</code>: (optional) Port used by coredns to access the k8s apiserver service.</li> </ul> <h3 id=deploying-vpc-dns-dependent-resources>Deploying VPC-DNS Dependent Resources<a class=headerlink href=#deploying-vpc-dns-dependent-resources title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
<span class=w>    </span><span class=nt>kubernetes.io/bootstrapping</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac-defaults</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">system:vpc-dns</span>
<span class=nt>rules</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;&quot;</span>
<span class=w>    </span><span class=nt>resources</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">endpoints</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">services</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pods</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">namespaces</span>
<span class=w>    </span><span class=nt>verbs</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">list</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">watch</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">discovery.k8s.io</span>
<span class=w>    </span><span class=nt>resources</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">endpointslices</span>
<span class=w>    </span><span class=nt>verbs</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">list</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">watch</span>
<span class=nn>---</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRoleBinding</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>annotations</span><span class=p>:</span>
<span class=w>    </span><span class=nt>rbac.authorization.kubernetes.io/autoupdate</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
<span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
<span class=w>    </span><span class=nt>kubernetes.io/bootstrapping</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac-defaults</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vpc-dns</span>
<span class=nt>roleRef</span><span class=p>:</span>
<span class=w>  </span><span class=nt>apiGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
<span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">system:vpc-dns</span>
<span class=nt>subjects</span><span class=p>:</span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vpc-dns</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<span class=nn>---</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vpc-dns</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<span class=nn>---</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vpc-dns-corefile</span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kube-system</span>
<span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>Corefile</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<span class=w>    </span><span class=no>.:53 {</span>
<span class=w>        </span><span class=no>errors</span>
<span class=w>        </span><span class=no>health {</span>
<span class=w>          </span><span class=no>lameduck 5s</span>
<span class=w>        </span><span class=no>}</span>
<span class=w>        </span><span class=no>ready</span>
<span class=w>        </span><span class=no>kubernetes cluster.local in-addr.arpa ip6.arpa {</span>
<span class=w>          </span><span class=no>pods insecure</span>
<span class=w>          </span><span class=no>fallthrough in-addr.arpa ip6.arpa</span>
<span class=w>        </span><span class=no>}</span>
<span class=w>        </span><span class=no>prometheus :9153</span>
<span class=w>        </span><span class=no>forward . /etc/resolv.conf {</span>
<span class=w>          </span><span class=no>prefer_udp</span>
<span class=w>        </span><span class=no>}</span>
<span class=w>        </span><span class=no>cache 30</span>
<span class=w>        </span><span class=no>loop</span>
<span class=w>        </span><span class=no>reload</span>
<span class=w>        </span><span class=no>loadbalance</span>
<span class=w>    </span><span class=no>}</span>
</code></pre></div> <h3 id=deploy-vpc-dns>Deploy vpc-dns<a class=headerlink href=#deploy-vpc-dns title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">VpcDns</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-cjh1</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>vpc</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cjh-vpc-1</span>
<span class=w>  </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cjh-subnet-1</span>
</code></pre></div> <ul> <li><code>vpc</code>: The VPC name used to deploy the DNS component.</li> <li><code>subnet</code>: The subnet name used to deploy the DNS component.</li> </ul> <p>View resource information:</p> <div class=highlight><pre><span></span><code><span class=o>[</span>root@hci-dev-mst-1<span class=w> </span>kubeovn<span class=o>]</span><span class=c1># kubectl get vpc-dns</span>
NAME<span class=w>        </span>ACTIVE<span class=w>   </span>VPC<span class=w>         </span>SUBNET
test-cjh1<span class=w>   </span><span class=nb>false</span><span class=w>    </span>cjh-vpc-1<span class=w>   </span>cjh-subnet-1
test-cjh2<span class=w>   </span><span class=nb>true</span><span class=w>     </span>cjh-vpc-1<span class=w>   </span>cjh-subnet-2
</code></pre></div> <ul> <li><code>ACTIVE</code>: if the custom vpc-dns is ready.</li> </ul> <h3 id=restrictions>Restrictions<a class=headerlink href=#restrictions title="Permanent link">&para;</a></h3> <ul> <li>Only one custom DNS component will be deployed in one VPC;</li> <li>When multiple VPC-DNS resources (i.e. different subnets in the same VPC) are configured in one VPC, only one VPC-DNS resource with status <code>true</code> will be active, while the others will be <code>false</code>;</li> <li>When the <code>true</code> VPC-DNS is deleted, another <code>false</code> VPC-DNS will be deployed.</li> </ul> <h2 id=default-subnet-selection-for-custom-vpc>Default subnet selection for custom VPC<a class=headerlink href=#default-subnet-selection-for-custom-vpc title="Permanent link">&para;</a></h2> <p>If the custom VPC is running multiple Subnets, you can specify the default Subnet for that VPC.</p> <div class=highlight><pre><span></span><code><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Vpc</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubeovn.io/v1</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test-vpc-1</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>namespaces</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ns1</span>
<span class=w>  </span><span class=nt>defaultSubnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test</span>
</code></pre></div> <ul> <li><code>defaultSubnet</code>: Name of the subnet that should be used by custom VPC as the default one.</li> </ul> <p>Please note that it will annotate the VPC namespaces with just one logical switch using <code>"ovn.kubernetes.io/logical_switch"</code> annotation. Any of the new Pods without <code>"ovn.kubernetes.io/logical_switch"</code> annotation will be added to the default Subnet.</p> <p><a class=md-button href=/docs/v1.14.x/en/pdf/document.pdf target=_blank><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg></span> PDF</a> <a class=md-button href=https://communityinviter.com/apps/kube-ovn/kube-ovn/ target=_blank><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M6 15a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2h2zm1 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5a2 2 0 0 1-2 2 2 2 0 0 1-2-2zm2-8a2 2 0 0 1-2-2 2 2 0 0 1 2-2 2 2 0 0 1 2 2v2zm0 1a2 2 0 0 1 2 2 2 2 0 0 1-2 2H4a2 2 0 0 1-2-2 2 2 0 0 1 2-2zm8 2a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2h-2zm-1 0a2 2 0 0 1-2 2 2 2 0 0 1-2-2V5a2 2 0 0 1 2-2 2 2 0 0 1 2 2zm-2 8a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2v-2zm0-1a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5a2 2 0 0 1 2 2 2 2 0 0 1-2 2z"/></svg></span> Slack</a> <a class=md-button href=https://www.alauda.io/products/kube-ovn target=_blank><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"/></svg></span> Support</a></p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="September 10, 2025 06:56:29 UTC">September 10, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="May 24, 2022 09:15:22 UTC">May 24, 2022</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg> </span> <span>GitHub</span> <nav> <a href=https://github.com/oilbeater class=md-author title=@oilbeater> <img src="https://avatars.githubusercontent.com/u/1189736?v=4&size=72" alt=oilbeater> </a> <a href=https://github.com/web-flow class=md-author title=@web-flow> <img src="https://avatars.githubusercontent.com/u/19864447?v=4&size=72" alt=web-flow> </a> </nav> </span> </aside> <h2 id=__comments>Comments</h2> <script src=https://giscus.app/client.js data-repo=kubeovn/kube-ovn data-repo-id="MDEwOlJlcG9zaXRvcnkxNzcwNjg5NjE=" data-category=Announcements data-category-id=DIC_kwDOCo3boc4CAj60 data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=light data-lang=en crossorigin=anonymous async>
  </script> <script>
  var palette = __md_get("__palette")
  if (palette && typeof palette.color === "object")
    if (palette.color.scheme === "slate") {
      var giscus = document.querySelector("script[src*=giscus]")
      giscus.setAttribute("data-theme", "dark")
    }

  /* Register event handlers after documented loaded */
  document.addEventListener("DOMContentLoaded", function () {
    var ref = document.querySelector("[data-md-component=palette]")
    ref.addEventListener("change", function () {
      var palette = __md_get("__palette")
      if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"

        /* Instruct Giscus to change theme */
        var frame = document.querySelector(".giscus-frame")
        frame.contentWindow.postMessage(
          { giscus: { setConfig: { theme } } },
          "https://giscus.app"
        )
      }
    })
  })
</script> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> <p>The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href=https://www.linuxfoundation.org/legal/trademark-usage>Trademark Usage page</a>. </p> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://jinshuju.net/f/lyrEow target=_blank rel=noopener title=jinshuju.net class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154m-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4m-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2M563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4m-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6m107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6"/></svg> </a> <a href=https://communityinviter.com/apps/kube-ovn/kube-ovn/ target=_blank rel=noopener title=communityinviter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1s21.16-47.06 47.06-47.06h47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06S448 171 448 196.9s-21.16 47.06-47.06 47.06h-47.06zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06S309 480 283.1 480s-47.06-21.16-47.06-47.06v-47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06s21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06z"/></svg> </a> <a href=https://twitter.com/kubeovn target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg> </a> <a href=https://github.com/kubeovn target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://hub.docker.com/r/kubeovn/kube-ovn target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.highlight", "search.share", "search.suggest", "content.code.annotate", "content.code.copy", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.13a4f30d.min.js></script> </body> </html>